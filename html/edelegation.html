<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div id="buttons">
        <!-- Step 1 -->
        <button class="buttonClass">Click me 1</button>
        <button class="buttonClass">Click me 2</button>
        <!-- buttons... -->
        <button class="buttonClass">Click me 3</button>
        <button class="buttonClass">Click me 4</button>
    </div>
    <div id="content1"></div>
    <script>
        /* function tst2(params) {
            console.log("dsdadad");
        } */
    </script>

    <script>
        document.getElementById('buttons')
            .addEventListener('click', event => { // Step 2
                if (event.target.className === 'buttonClass') { // Step 3
                    console.log(event.target.innerHTML);
                }
            });
        var elements = document.querySelectorAll("button");
        for (const e of elements) {
            console.log(e);
        }

        var c1 = document.getElementById("content1")
        /* eval('console.log(this)')
        eval('function tst3() {            console.log("tst3");        }')
        var c1 = document.getElementById("content1")
        c1.innerHTML = ' <img src="u.png" onload="alert(\'Now that I have your attention...\');this.parentNode.removeChild(this);" />'
        c1.innerHTML = '<p>Alerted</p><script>window.tst2 = function tst2() {            console.log("from inner");        }<\/script>';
        eval(c1.querySelector("script").innerHTML)
        tst2()
        tst3() */

        function insertHTML(html, dest, append = false) {
            // if no append is requested, clear the target element
            if (!append) dest.innerHTML = '';
            // create a temporary container and insert provided HTML code
            let container = document.createElement('div');
            container.innerHTML = html;
            // cache a reference to all the scripts in the container
            let scripts = container.querySelectorAll('script');
            // get all child elements and clone them in the target element
            let nodes = container.childNodes;
            for (let i = 0; i < nodes.length; i++) dest.appendChild(nodes[i].cloneNode(true));
            // force the found scripts to execute...
            for (let i = 0; i < scripts.length; i++) {
                let script = document.createElement('script');
                script.type = scripts[i].type || 'text/javascript';
                if (scripts[i].hasAttribute('src')) script.src = scripts[i].src;
                script.innerHTML = scripts[i].innerHTML;
                document.head.appendChild(script);
                document.head.removeChild(script);
            }
            // done!
            return true;
        }

        var htm = '<p>Alerted</p><script>function tst2() {            console.log("from inner");        }<\/script>'
        insertHTML(htm, c1, true)
        tst2()

        /* var $ = function (is) {
          console.log(is);
      }
      $("td") */
        /* var $ = {//use fetch
            getJSON:  async function (url,cb) {
                console.log(url);
                let d = {}
                if(cb)cb(d)
            }
        }
        async function tst() {
          $.getJSON("/my/url",function (data) {
            console.log(data);
          })
        }
        tst() */
    </script>

</body>

</html>